"use strict";function jsShangPin(){var e=$("div.orderable-table");e.children("div.table-header");e.children("div.table-body").children("div.row").each(function(){var e=$(this).children("span"),t=e.eq(1),n=e.eq(2),i=e.eq(3),o=t.text(),a=n.text(),c=i.text(),s=new RegExp(",","");o=Number(o.replace(s,"")),a=Number(a.replace(s,"")),c=Number(c.replace(s,""));var r=a/o*100,l='<span class="ch-span"><br>'+r.toFixed(1)+"%</span>";n.append(l),r=(c+a)/o*100,l='<span class="ch-span"><br>'+r.toFixed(1)+"%</span>",t.append(l),r=c/o*100,l='<span class="ch-span"><br>'+r.toFixed(1)+"%</span>",i.append(l)})}function gouxuan(e,t,n,i){$("span.ch-span").remove();var o=$("div.dropdown-index-picker"),a=o.find("span.checkbox");a.each(function(e,t){var n=$(this);0!=e&&n.hasClass("selected")&&n.click()}),a.each(function(o,a){var c=$(this);switch(o){case e:case t:case n:case i:c.click()}})}function jsDanPin(){var e=$("li.t-source-name ul.flow-source-table").children("ul").children("li"),t=$("li.t-flow ul.flow-source-table").children("ul").children("li"),n=$("li.t-guide ul.flow-source-table").children("ul").children("li");e.each(function(){var e=$(this).index(),i=t.eq(e).children("div").eq(0),o=n.eq(e).children("div").eq(0),a=n.eq(e).children("div").eq(1),c=i.text(),s=a.text(),r=o.text(),l=new RegExp(",","");c=Number(c.replace(l,"")),s=Number(s.replace(l,"")),r=Number(r.replace(l,""));var d=s/c*100,p='<span class="ch-span">'+d.toFixed(1)+"%</span>";a.append(p),d=(r+s)/c*100,p='<span class="ch-span">'+d.toFixed(1)+"%</span>",i.append(p),d=r/c*100,p='<span class="ch-span">'+d.toFixed(1)+"%</span>",o.append(p)})}function chaiFenBiaoTi(){if(0==qnid){var e=$("a.item-title"),t=e.text(),n=e.attr("href");qnid=/([^id=]+)\d{10,12}/g.exec(n)[0],console.log(qnid);var i="https://s.taobao.com/search?q="+t+"&imgfile=&js=1&style=grid&stats_click=search_radio_all%3A1&initiative_id=staobaoz_20170411&ie=utf8";GM_xmlhttpRequest({method:"GET",headers:{Accept:"text/html,application/xhtml+xml,application/xml","User-agent":" Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36"},url:i,onerror:function(e){console.error(e),toastMsg("数据获取出错！")},ontimeout:function(e){console.error(e),toastMsg("数据获取超时！")},onload:function(n){var i=n.responseText,o="g_page_config = ".length,a=";     ".length,c=i.indexOf("g_page_config = "),s=i.indexOf("g_srp_loadCss()"),r=i.substring(c+o,s-a),l=JSON.parse(r);l=l.mods.itemlist.data.auctions;for(var d in l)l[d].nid==qnid&&e.html(l[d].title);$("li.ch-btn2 a.ch-copy-btn").text("复制词根").attr("data-clipboard-text",titleList(t)),toastMsg("拆分完成！")}})}}function tiquTop10(){var e="",t=$("li.t-source-name ul.flow-source-table").children("ul").children("li"),n=$("li.t-flow ul.flow-source-table").children("ul").children("li");console.log(t),t.each(function(){var i=$(this).index(),o=t.eq(i).text(),a=n.eq(i).children("div").eq(0).text();e+=o+"\t"+a,i<t.length-1&&(e+="\n")}),console.log(e),$("li.ch-btn3 a.ch-copy-btn").attr("data-clipboard-text",e)}function titleList(e){var t=$("a.item-title span"),n="",i="";return t.each(function(){n+=$(this).text(),i!=e?i+=$(this).text():$(this).css("background-color","red"),$(this).index()<t.length-1&&(n+="\n")}),n}function copy(){var e=new ClipboardJS(".ch-copy-btn");e.on("success",function(e){console.info(e.text+"\n -复制成功！"),toastMsg("复制成功！在Excel表格中粘贴（Ctrl + V）一下就可以了哦！",2e3),e.clearSelection()}),e.on("error",function(e){console.info("复制失败！"),toastMsg("复制失败！",2e3)})}function toastMsg(e,t){t=isNaN(t)?3e3:t;var n=document.createElement("div");n.innerHTML=e,n.style.cssText="min-width: 150px;opacity: 0.7;height: 30px;color: rgb(255, 255, 255);line-height: 30px;text-align: center;border-radius: 5px;position: fixed;left: 0;right: 0;top: 40%;margin:0 auto;z-index: 999999;background: rgb(0, 0, 0);font-size: 12px;",document.body.appendChild(n),setTimeout(function(){n.style.webkitTransition="-webkit-transform 0.5s ease-in, opacity 0.5s ease-in",n.style.opacity="0",setTimeout(function(){document.body.removeChild(n)},500)},t)}function getRelatedWord(){if("0"==keyword)if(""!=(keyword=$("input.ant-input").val())){var e="",t=$("div.oui-date-picker-current-date").text(),n=/\d{4}-\d{2}-\d{2}/,i=t.split("~"),o=n.exec(i[0]);if(i.length>1)toastMsg("目前仅支持按日提取数据，请不要选周，月，7天，30天！");else{o+="%7C"+n.exec(i[0]),console.log(o),console.log(keyword);var a="https://sycm.taobao.com/mc/searchword/relatedWord.json?dateRange="+o+"&dateType=day&pageSize=10&page=1&order=desc&orderBy=seIpvUvHits&keyword="+keyword+"&device=0&indexCode=seIpvUvHits%2CsePvIndex%2CclickRate%2CclickHits%2CclickHot";console.log(a),GM_xmlhttpRequest({method:"GET",headers:{},url:a,onerror:function(e){console.error(e),toastMsg("数据获取出错！")},ontimeout:function(e){console.error(e),toastMsg("数据获取超时！")},onload:function(t){var n=t.responseText,i=JSON.parse(n);console.log(i.data);var o=i.data;for(var a in o)e+=o[a].keyword+"\t"+o[a].seIpvUvHits+"\t"+o[a].sePvIndex+"\t"+o[a].clickRate+"\t"+o[a].clickHits+"\t"+o[a].clickHot+"\t"+o[a].tradeIndex+"\t"+o[a].payConvRate+"\t"+o[a].onlineGoodsCnt+"\t"+o[a].tmClickRatio+"\t"+o[a].p4pAmt+"\t"+o[a].spvRatio+"\t",e+="\n";$(".ch-copy-btn").text("复制数据").attr("data-clipboard-text",e),toastMsg("提取完成，请点击复制按钮复制数据！")}})}}else toastMsg("先选择搜索词，进入搜索分析哦！"),keyword="0"}var qnid=0,keyword="0";